import{r as d,j as e,b as f}from"./app-35b7e9e3.js";import{B as c}from"./react-toastify.esm-3b10c93f.js";const D=({finalGrandTotal:r,couponCode1:a,setFinalGrandTotal:i,shippingAmount:m,codCharges:x,gstCharges:b,paymentMode:h,setCouponCode1:l,setCouponDiscount:p,removeCoupon:k})=>{const[o,C]=d.useState(""),[g,s]=d.useState(""),N=()=>{if(!o.trim()){s("Please enter a coupon code.");return}f.post("/apply-coupon",{coupon_code:o}).then(t=>{const{discountAmount:n,updatedTotal:y,success:j,message:u}=t.data;if(j){r=0;let v=h=="Cash On Delivery"?x:0;console.log("coupon worked",n),i((Number(y)+Number(m)+Number(v)+Number(b)).toFixed(2)),s(`Coupon applied successfully! Discount: ${n}`),l(o),p(n),console.log("coupons worked",n),c(u)}else s(u),c(u)}).catch(t=>{s("An error occurred while applying the coupon."),c(g)})};return e.jsxs("div",{className:"discount-code",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Discount Code",value:o,onChange:t=>C(t.target.value)}),a==""&&e.jsx("button",{className:"discount-button",type:"button",onClick:N,children:"Apply"}),a!=""&&e.jsx("button",{className:"discount-button",onClick:()=>{c("Coupon removed successfully"),setFinalGrandTotal1((Number(r)+Number(couponDiscount)).toFixed(2)),l(""),p(0)},children:"Remove"}),e.jsx("br",{}),e.jsx("div",{})]})},F=D;export{F as default};
