import{r as m,j as e,Y as y,b as i,y as g}from"./app-7b200f12.js";import"./Dropdown-749cfb62.js";import{H as j,B as b}from"./HomeLayout-4b32994c.js";import"./Header-81d36cd9.js";import"./Footer-95724ac6.js";function w({auth:d,cart:o}){let n=[];o&&o.forEach(t=>{n.push({id:t.product_id,name:t.product_variant!=null?t.product_variant.product_title:t.products.product_title,description:t.products.product_sub_title,price:t.product_variant!=null?t.product_variant.product_price:t.products.product_price,quantity:t.qty})});const[a,c]=m.useState(n),l=()=>a.reduce((t,r)=>t+r.price*r.quantity,0),u=async t=>{await fetch("/api/cart/increase",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({item_id:t})}).then(r=>r.json()).then(r=>{c(a.map(s=>s.id===t?{...s,quantity:Number(s.quantity)+1}:s))}).catch(r=>console.error(r))},x=async t=>{c(a.map(r=>r.id===t&&r.quantity>1?{...r,quantity:r.quantity-1}:r));try{const r=await i.post("/api/cart/decrease",{item_id:t});c(a.map(s=>s.id===t?{...s,quantity:r.data.updated_quantity}:s))}catch(r){console.error("Error decreasing quantity:",r)}},p=async t=>{c(a.filter(r=>r.id!==t));try{await i.post("/api/cart/remove",{item_id:t}),c(a.filter(r=>r.id!==t))}catch(r){console.error("Error removing item:",r)}b.success("Product Removed Successfully",{autoClose:5e3})},h=async()=>{g.get("/checkout/payment",{onSuccess:()=>alert("Order Placed Successfully"),onError:t=>console.error(t)})};return e.jsxs(j,{auth:d,header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Dashboard"}),children:[e.jsx(y,{title:"Cart"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 text-gray-900",children:e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Shopping Cart"}),e.jsx("div",{className:"bg-white shadow-md rounded-lg p-4",children:a.length>0?a.map(t=>e.jsxs("div",{className:"flex items-center justify-between border-b py-4",children:[e.jsxs("div",{className:"w-[100px] truncate ...",children:[e.jsx("h2",{className:"text-lg font-medium",children:t.name}),e.jsx("p",{className:"text-gray-600 text-sm",children:t.description}),e.jsxs("p",{className:"text-gray-800 font-semibold",children:["Price: $",t.price]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>x(t.id),className:"px-3 py-1 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"-"}),e.jsx("span",{className:"mx-3",children:t.quantity}),e.jsx("button",{onClick:()=>u(t.id),className:"px-3 py-1 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"+"})]}),e.jsx("button",{onClick:()=>p(t.id),className:"text-red-500 hover:text-red-600",children:"Delete"})]},t.id)):e.jsx("p",{className:"text-gray-600 text-center py-4",children:"Your cart is currently empty."})}),a.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4 text-right",children:e.jsxs("h2",{className:"text-xl font-bold",children:["Total: $",l()]})}),e.jsx("div",{className:"mt-4 text-right",children:e.jsx("button",{onClick:()=>h(),className:"text-gray-900 hover:text-gray-950 border border-black p-1 rounded hover:bg-gray-900 hover:text-white",children:"Checkout"})})]})]})})})})})]})}export{w as default};
