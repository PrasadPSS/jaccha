import{r,j as e,Y as P,b as $,y as E}from"./app-388a1bef.js";import{H as T}from"./HomeLayout-a0660935.js";import"./Header-ee45219b.js";import"./Footer-3b1c1e1d.js";import"./InputError-ad8121a8.js";function B({auth:t,data:u}){const[i,_]=r.useState({shipping_full_name:t.user.name,shipping_mobile_no:t.user.mobile_no,shipping_address_line1:"",shipping_address_line2:"",shipping_landmark:"NA",shipping_city:"",shipping_pincode:"",shipping_district:"Thane",shipping_state:"",shipping_address_type:"Home",shipping_email:t.user.email,default_address_flag:!1}),{cart:j,user:H,shipping_address:g,shipping_addresses:y,cart_amounts:l,shipping_amount:b,payment_mode:N,order_delivery:L,increment_id:v,shipping_charges:f,grand_total:q,cod_rmk:m,cod_response:k,cod_charges:p}=u;console.log("rmk",m);const[d,C]=r.useState(b),[h,A]=r.useState(k=="Y"?1:0),[x,F]=r.useState(g.shipping_address_id),[o,D]=r.useState("");let n;o=="Cash On Delivery"?n=parseFloat(l.cart.cart_discounted_total+d+Number(p)).toFixed(2):n=parseFloat(l.cart.cart_discounted_total+d).toFixed(2);const S=parseFloat(l.total_gst).toFixed(2);parseFloat(l.cart.cart_discounted_total-S+l.product_discount-n).toFixed(2);const O=s=>{console.log("cod_response_null"),$.get("/orders/calculaterate/"+s).then(a=>{C(a.data.shipping_amount),A(a.data.cod_response),console.log("cod_response",a)})},c=s=>{const{name:a,value:R,type:M,checked:I}=s.target;_({...i,[a]:M==="checkbox"?I:R})},w=s=>{s.preventDefault(),E.post(route("address.store"),i,{onSuccess:()=>{console.log("Address submitted successfully")},onError:a=>{console.error("Validation Errors: ",a)}})};return e.jsxs(T,{auth:t,children:[e.jsx(P,{title:"Place Order"}),e.jsx("div",{className:"sub-banner bg-light pb-0",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-sm-12",children:e.jsxs("div",{className:"banner_heading pb-4",children:[e.jsx("h2",{children:"Checkout"}),e.jsxs("p",{children:[t.cart_count," Items"]})]})})})})}),e.jsx("section",{className:"checkout bg-light",children:e.jsx("div",{className:"container",children:e.jsx("form",{action:"",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-sm-7",children:[e.jsxs("div",{className:"checkout-form pt-5 d-flex align-items-center",children:[e.jsx("h4",{className:"mb-0",children:"Address Details"}),e.jsxs("button",{type:"button",className:"btn add-new-address-btn","data-bs-toggle":"modal","data-bs-target":"#exampleModal",children:[e.jsx("i",{className:"fas fa-plus-circle"})," Add New Address"]})]}),e.jsxs("div",{className:"checkout-form mt-4 payment-details",children:[e.jsx("h4",{className:"",children:"Select Address"}),e.jsx("div",{className:"row",children:y.map(s=>e.jsx("div",{className:"col-sm-12",children:e.jsxs("div",{className:"form-check payment-radio-btn",children:[e.jsx("input",{onClick:()=>{F(s.shipping_address_id),O(s.shipping_address_id)},checked:s.shipping_address_id==x,className:"form-check-input",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault1"}),e.jsx("label",{className:"form-check-label",htmlFor:"flexRadioDefault1",children:`${s.shipping_address_line1}, ${s.shipping_address_line2}, ${s.shipping_city}, ${s.shipping_state}, ${s.shipping_pincode}`})]})},s.shipping_address_id))})]}),e.jsxs("div",{className:"checkout-form mt-4 payment-details",children:[e.jsx("h4",{className:"",children:"Payment"}),e.jsx("p",{className:"mb-4",children:"All transactions are secure and encrypted."}),e.jsx("div",{className:"row",children:N.map((s,a)=>e.jsx("div",{className:"col-sm-12",children:e.jsxs("div",{className:"form-check payment-radio-btn",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"paymentRadioDefault",id:`paymentMode${s.payment_mode_id}`,disabled:s.payment_mode_name=="Cash On Delivery"&&h==0,onClick:()=>D(s.payment_mode_name),defaultChecked:s.default_selected===1}),e.jsxs("div",{className:"d-flex payment-btn-img",children:[e.jsx("label",{className:"form-check-label",htmlFor:"flexRadioDefault1",children:s.payment_mode_name=="Cash On Delivery"&&h==0?m:s.payment_mode_name}),s.payment_mode_name!="Cash On Delivery"&&e.jsxs("div",{children:[e.jsx("img",{src:"/assets/images/payment/visa.png"}),e.jsx("img",{src:"/assets/images/payment/maestro.png"}),e.jsx("img",{src:"/assets/images/payment/mastercard.png"}),e.jsx("img",{src:"/assets/images/payment/amex.png"}),e.jsx("button",{type:"button",children:"+4"})]})]})]})}))})]})]}),e.jsx("div",{className:"col-sm-5",children:e.jsxs("div",{className:"checkout-right",children:[j.map((s,a)=>e.jsxs("div",{className:"checkout-product mb-3",children:[e.jsxs("div",{className:"checkout-product_img position-relative",children:[e.jsx("img",{src:"/backend-assets/uploads/product_thumbs/"+s.products.product_thumb,alt:""}),e.jsx("p",{children:s.qty})]}),e.jsxs("div",{className:"checkout-product_content",children:[e.jsx("h5",{children:s.products.product_title}),e.jsx("p",{})]}),e.jsx("div",{className:"checkout-product_price",children:e.jsxs("p",{children:["₹",s.product_variant_id?s.product_variant.product_price:s.products.product_price,".00"]})})]})),e.jsxs("div",{className:"payment-history mt-5",children:[e.jsxs("div",{className:"payment-display mb-2",children:[e.jsxs("p",{children:["Subtotal . ",t.cart_count," Items"]}),e.jsxs("p",{children:["₹",o=="Cash On Delivery"?n-parseFloat(d).toFixed(2)-Number(p):n-parseFloat(d).toFixed(2)]})]}),e.jsxs("div",{className:"payment-display mb-3",children:[e.jsx("p",{children:"Shipping"}),e.jsxs("p",{children:["₹",parseFloat(d).toFixed(2)]})]}),e.jsxs("div",{className:"payment-display mb-3",children:[e.jsx("p",{children:"COD Charges"}),e.jsxs("p",{children:["₹",o=="Cash On Delivery"?Number(p).toFixed(2):0]})]}),e.jsxs("div",{className:"payment-display",children:[e.jsx("p",{children:e.jsx("b",{children:"Total"})}),e.jsx("p",{children:e.jsxs("b",{children:["₹",n]})})]})]}),e.jsxs("form",{action:"/order/place",method:"POST",children:[e.jsx("input",{type:"hidden",name:"_token",value:document.querySelector('meta[name="csrf-token"]').getAttribute("content")}),e.jsx("input",{type:"hidden",name:"amount",value:n}),e.jsx("input",{type:"hidden",name:"shipping_amount",value:d}),e.jsx("input",{type:"hidden",name:"txnid",value:v||""}),e.jsx("input",{type:"hidden",name:"shipping_charges",value:JSON.stringify(f||{})}),e.jsx("input",{type:"hidden",name:"shipping_id",value:x}),e.jsx("input",{type:"hidden",name:"paymentmode",value:o}),e.jsx("div",{className:"pay-now-button",children:e.jsx("button",{type:"submit",children:"Pay now & Confirm Order"})})]})]})})]})})})}),e.jsx("div",{className:"modal fade",id:"exampleModal",tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog add-address-form",children:e.jsxs("div",{className:"modal-content bg-light py-2",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title text-center m-auto",id:"exampleModalLabel",children:"Add new Address"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",children:e.jsx("i",{className:"far fa-times"})})]}),e.jsxs("form",{action:"",onSubmit:w,children:[e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row",action:"",children:[e.jsx("div",{className:"col-sm-12",children:e.jsx("div",{className:"form-inputs mb-3",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Address",id:"shipping_address_line1",name:"shipping_address_line1",value:i.shipping_address_line1,onChange:c})})}),e.jsx("div",{className:"col-sm-12",children:e.jsx("div",{className:"form-inputs mb-3",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Apartment (Optional)",id:"shipping_address_line2",name:"shipping_address_line2",value:i.shipping_address_line2,onChange:c})})}),e.jsx("div",{className:"col-sm-6",children:e.jsx("div",{className:"form-inputs mb-3",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"City",id:"shipping_city",name:"shipping_city",value:i.shipping_city,onChange:c})})}),e.jsx("div",{className:"col-sm-6",children:e.jsx("div",{className:"form-inputs mb-3",children:e.jsx("input",{type:"number",className:"form-control",placeholder:"Post Code",id:"shipping_pincode",name:"shipping_pincode",value:i.shipping_pincode,onChange:c})})}),e.jsx("div",{className:"col-sm-6",children:e.jsx("div",{className:"form-inputs",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Country/Region",id:"shipping_state",name:"shipping_state",value:i.shipping_state,onChange:c})})}),e.jsx("div",{className:"col-sm-6",children:e.jsx("div",{className:"form-inputs",children:e.jsx("input",{type:"number",className:"form-control",placeholder:"Alternate Contact Number",id:"exampleAddress"})})})]})}),e.jsxs("div",{className:"modal-footer m-auto border-0",children:[e.jsx("button",{type:"submit",className:"btn button black",children:"Add Address"}),e.jsx("button",{type:"button",className:"button cancel_btn black","data-bs-dismiss":"modal",children:"Cancel"})]})]})]})})})]})}export{B as default};
