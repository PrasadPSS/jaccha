import{r,j as o,b as D}from"./app-9c60c081.js";import{B as u}from"./react-toastify.esm-ce4082cd.js";const k=({finalGrandTotal:l,couponCode1:a,setFinalGrandTotal:p,shippingAmount:d,codCharges:i,gstCharges:m,paymentMode:x,setCouponCode1:h,setCouponDiscount:C,removeCoupon:b})=>{const[e,g]=r.useState(""),[j,s]=r.useState(""),y=()=>{if(!e.trim()){s("Please enter a coupon code.");return}D.post("/apply-coupon",{coupon_code:e}).then(t=>{const{discountAmount:n,updatedTotal:N,success:f,message:c}=t.data;if(f){l=0;let v=x=="Cash On Delivery"?i:0;console.log("coupon worked",n),p((Number(N)+Number(d)+Number(v)+Number(m)).toFixed(2)),s(`Coupon applied successfully! Discount: ${n}`),h(e),C(n),console.log("coupons worked",n),u(c)}else s(c),u(c)}).catch(t=>{s("An error occurred while applying the coupon."),u(j)})};return o.jsxs("div",{className:"discount-code",children:[o.jsx("input",{type:"text",className:"form-control",placeholder:"Discount Code",value:e,onChange:t=>g(t.target.value)}),a==""&&o.jsx("button",{className:"discount-button",type:"button",onClick:y,children:"Apply"}),a!=""&&o.jsx("button",{className:"discount-button",onClick:b,children:"Remove"}),o.jsx("br",{}),o.jsx("div",{})]})},E=k;export{E as default};
