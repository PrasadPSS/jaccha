import{r as a,j as o,b as D}from"./app-40acd811.js";import{B as u}from"./react-toastify.esm-2f604a06.js";const k=({finalGrandTotal:r,couponCode1:l,setFinalGrandTotal:p,shippingAmount:d,codCharges:i,gstCharges:m,paymentMode:x,setCouponCode1:C,setCouponDiscount:h,removeCoupon:b})=>{const[e,g]=a.useState(""),[j,s]=a.useState(""),y=()=>{if(!e.trim()){s("Please enter a coupon code.");return}D.post("/apply-coupon",{coupon_code:e}).then(t=>{const{discountAmount:n,updatedTotal:N,success:f,message:c}=t.data;if(f){r=0;let v=x=="Cash On Delivery"?i:0;console.log("coupon worked",n),p((Number(N)+Number(d)+Number(v)+Number(m)).toFixed(2)),s(`Coupon applied successfully! Discount: ${n}`),C(e),h(n),console.log("coupons worked",n),u(c)}else s(c),u(c)}).catch(t=>{s("An error occurred while applying the coupon."),u(j)})};return o.jsxs("div",{className:"discount-code",children:[o.jsx("input",{type:"text",className:"form-control",placeholder:"Discount Code",value:e,onChange:t=>g(t.target.value)}),o.jsx("button",{className:"discount-button",type:"button",onClick:y,children:"Apply"}),l!=""&&o.jsx("button",{className:"discount-button",onClick:b,children:"Remove"}),o.jsx("br",{}),o.jsx("div",{})]})},E=k;export{E as default};
