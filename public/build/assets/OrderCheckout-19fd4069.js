import{r as l,j as e,Y as F,b as w}from"./app-bebe3769.js";import{H as S}from"./HomeLayout-908484e3.js";import"./Header-1b4c6fe5.js";import"./Footer-c6872daa.js";function T({auth:n,data:m}){const{cart:p,user:D,shipping_address:h,shipping_addresses:x,cart_amounts:d,shipping_amount:u,payment_mode:j,order_delivery:O,increment_id:N,shipping_charges:b,grand_total:R,cod_rmk:M,cod_response:_,cod_charges:y}=m,[t,g]=l.useState(u),[c,v]=l.useState(_=="Y"?1:0);console.log(c);const[r,f]=l.useState(h.shipping_address_id),[o,k]=l.useState("");let a;o=="Cash On Delivery"?a=parseFloat(d.cart.cart_discounted_total+t+Number(y)).toFixed(2):a=parseFloat(d.cart.cart_discounted_total+t).toFixed(2);const A=parseFloat(d.total_gst).toFixed(2);parseFloat(d.cart.cart_discounted_total-A+d.product_discount-a).toFixed(2);const C=s=>{w.get("/orders/calculaterate/"+s).then(i=>{g(i.data.shipping_amount),v(i.data.cod_response)})};return e.jsxs(S,{auth:n,children:[e.jsx(F,{title:"Place Order"}),e.jsx("div",{className:"sub-banner bg-light pb-0",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-sm-12",children:e.jsxs("div",{className:"banner_heading pb-4",children:[e.jsx("h2",{children:"Checkout"}),e.jsxs("p",{children:[n.cart_count," Items"]})]})})})})}),e.jsx("section",{className:"checkout bg-light",children:e.jsx("div",{className:"container",children:e.jsx("form",{action:"",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-sm-7",children:[e.jsxs("div",{className:"checkout-form pt-5 d-flex align-items-center",children:[e.jsx("h4",{className:"mb-0",children:"Address Details"}),e.jsxs("button",{type:"button",className:"btn add-new-address-btn","data-bs-toggle":"modal","data-bs-target":"#exampleModal",children:[e.jsx("i",{className:"fas fa-plus-circle"})," Add New Address"]})]}),e.jsxs("div",{className:"checkout-form mt-4 payment-details",children:[e.jsx("h4",{className:"",children:"Select Address"}),e.jsx("div",{className:"row",children:x.map(s=>e.jsx("div",{className:"col-sm-12",children:e.jsxs("div",{className:"form-check payment-radio-btn",children:[e.jsx("input",{onClick:()=>{f(s.shipping_address_id),C(s.shipping_address_id)},checked:s.shipping_address_id==r,className:"form-check-input",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault1"}),e.jsx("label",{className:"form-check-label",htmlFor:"flexRadioDefault1",children:`${s.shipping_address_line1}, ${s.shipping_address_line2}, ${s.shipping_city}, ${s.shipping_state}, ${s.shipping_pincode}`})]})},s.shipping_address_id))})]}),e.jsxs("div",{className:"checkout-form mt-4 payment-details",children:[e.jsx("h4",{className:"",children:"Payment"}),e.jsx("p",{className:"mb-4",children:"All transactions are secure and encrypted."}),e.jsx("div",{className:"row",children:j.map((s,i)=>e.jsx("div",{className:"col-sm-12",children:e.jsxs("div",{className:"form-check payment-radio-btn",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"paymentRadioDefault",id:`paymentMode${s.payment_mode_id}`,disabled:s.payment_mode_name=="Cash On Delivery"&&c==0,onClick:()=>k(s.payment_mode_name),defaultChecked:s.default_selected===1}),e.jsxs("div",{className:"d-flex payment-btn-img",children:[e.jsx("label",{className:"form-check-label",htmlFor:"flexRadioDefault1",children:s.payment_mode_name=="Cash On Delivery"&&c==0?"Cod not available":s.payment_mode_name}),s.payment_mode_name!="Cash On Delivery"&&e.jsxs("div",{children:[e.jsx("img",{src:"/assets/images/payment/visa.png"}),e.jsx("img",{src:"/assets/images/payment/maestro.png"}),e.jsx("img",{src:"/assets/images/payment/mastercard.png"}),e.jsx("img",{src:"/assets/images/payment/amex.png"}),e.jsx("button",{children:"+4"})]})]})]})}))})]})]}),e.jsx("div",{className:"col-sm-5",children:e.jsxs("div",{className:"checkout-right",children:[p.map((s,i)=>e.jsxs("div",{className:"checkout-product mb-3",children:[e.jsxs("div",{className:"checkout-product_img position-relative",children:[e.jsx("img",{src:"/backend-assets/uploads/product_thumbs/"+s.products.product_thumb,alt:""}),e.jsx("p",{children:s.qty})]}),e.jsxs("div",{className:"checkout-product_content",children:[e.jsx("h5",{children:s.products.product_title}),e.jsxs("p",{children:[s.products.product_weight,"gm | ",s.sweetness_level," Sweetness | ",s.ingredient_addons," | No ",s.ingredient_exclusions]})]}),e.jsx("div",{className:"checkout-product_price",children:e.jsxs("p",{children:["₹",s.products.product_price,".00"]})})]})),e.jsxs("div",{className:"payment-history mt-5",children:[e.jsxs("div",{className:"payment-display mb-2",children:[e.jsxs("p",{children:["Subtotal . ",n.cart_count," Items"]}),e.jsxs("p",{children:["₹",a-parseFloat(t).toFixed(2)," "]})]}),e.jsxs("div",{className:"payment-display mb-3",children:[e.jsx("p",{children:"Shipping"}),e.jsxs("p",{children:["₹",parseFloat(t).toFixed(2)]})]}),e.jsxs("div",{className:"payment-display",children:[e.jsx("p",{children:e.jsx("b",{children:"Total"})}),e.jsx("p",{children:e.jsxs("b",{children:["₹",a]})})]})]}),e.jsxs("form",{action:"/order/place",method:"POST",children:[e.jsx("input",{type:"hidden",name:"_token",value:document.querySelector('meta[name="csrf-token"]').getAttribute("content")}),e.jsx("input",{type:"hidden",name:"amount",value:a}),e.jsx("input",{type:"hidden",name:"shipping_amount",value:t}),e.jsx("input",{type:"hidden",name:"txnid",value:N||""}),e.jsx("input",{type:"hidden",name:"shipping_charges",value:JSON.stringify(b||{})}),e.jsx("input",{type:"hidden",name:"shipping_id",value:r}),e.jsx("input",{type:"hidden",name:"paymentmode",value:o}),e.jsx("div",{className:"pay-now-button",children:e.jsx("button",{type:"submit",children:"Pay now & Confirm Order"})})]})]})})]})})})}),e.jsx("div",{className:"modal fade",id:"exampleModal",tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog add-address-form",children:e.jsxs("div",{className:"modal-content bg-light py-2",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title text-center m-auto",id:"exampleModalLabel",children:"Add new Address"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",children:e.jsx("i",{className:"far fa-times"})})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-12",children:e.jsx("div",{className:"form-inputs mb-3",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Address",id:"exampleAddress"})})}),e.jsx("div",{className:"col-sm-12",children:e.jsx("div",{className:"form-inputs mb-3",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Apartment (Optional)",id:"exampleAddress"})})}),e.jsx("div",{className:"col-sm-6",children:e.jsx("div",{className:"form-inputs mb-3",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"City",id:"exampleAddress"})})}),e.jsx("div",{className:"col-sm-6",children:e.jsx("div",{className:"form-inputs mb-3",children:e.jsx("input",{type:"number",className:"form-control",placeholder:"Post Code",id:"exampleAddress"})})}),e.jsx("div",{className:"col-sm-6",children:e.jsx("div",{className:"form-inputs",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Country/Region",id:"exampleAddress"})})}),e.jsx("div",{className:"col-sm-6",children:e.jsx("div",{className:"form-inputs",children:e.jsx("input",{type:"number",className:"form-control",placeholder:"Alternate Contact Number",id:"exampleAddress"})})})]})}),e.jsxs("div",{className:"modal-footer m-auto border-0",children:[e.jsx("button",{type:"button",className:"btn button black",children:"Add Address"}),e.jsx("button",{type:"button",className:"button cancel_btn black","data-bs-dismiss":"modal",children:"Cancel"})]})]})})})]})}export{T as default};
