import{r as m,j as r,Y as y,b as i,y as g}from"./app-b3118a2e.js";import"./Dropdown-af45b100.js";import{H as j,B as b}from"./HomeLayout-4e0aabc2.js";import"./Header-237a6055.js";import"./Footer-bafd1197.js";function C({auth:d,cart:o}){let n=[];o&&o.forEach(e=>{n.push({id:e.product_id,name:e.products.product_title,description:e.products.product_sub_title,price:e.products.product_price,quantity:e.qty})});const[s,a]=m.useState(n),l=()=>s.reduce((e,t)=>e+t.price*t.quantity,0),x=async e=>{a(s.map(t=>t.id===e?{...t,quantity:t.quantity+1}:t)),await fetch("/api/cart/increase",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({item_id:e})}).then(t=>t.json()).then(t=>console.log("success",t)).catch(t=>console.error(t))},h=async e=>{a(s.map(t=>t.id===e&&t.quantity>1?{...t,quantity:t.quantity-1}:t));try{const t=await i.post("/api/cart/decrease",{item_id:e});a(s.map(c=>c.id===e?{...c,quantity:t.data.updated_quantity}:c))}catch(t){console.error("Error decreasing quantity:",t)}},u=async e=>{a(s.filter(t=>t.id!==e));try{await i.post("/api/cart/remove",{item_id:e}),a(s.filter(t=>t.id!==e))}catch(t){console.error("Error removing item:",t)}b.success("Product Removed Successfully",{autoClose:5e3})},p=async()=>{g.get("/checkout/payment",{onSuccess:()=>alert("Order Placed Successfully"),onError:e=>console.error(e)})};return r.jsxs(j,{auth:d,header:r.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Dashboard"}),children:[r.jsx(y,{title:"Cart"}),r.jsx("div",{className:"py-12",children:r.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:r.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:r.jsx("div",{className:"p-6 text-gray-900",children:r.jsxs("div",{className:"container mx-auto p-6",children:[r.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Shopping Cart"}),r.jsx("div",{className:"bg-white shadow-md rounded-lg p-4",children:s.length>0?s.map(e=>r.jsxs("div",{className:"flex items-center justify-between border-b py-4",children:[r.jsxs("div",{className:"w-[100px] truncate ...",children:[r.jsx("h2",{className:"text-lg font-medium",children:e.name}),r.jsx("p",{className:"text-gray-600 text-sm",children:e.description}),r.jsxs("p",{className:"text-gray-800 font-semibold",children:["Price: $",e.price]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("button",{onClick:()=>h(e.id),className:"px-3 py-1 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"-"}),r.jsx("span",{className:"mx-3",children:e.quantity}),r.jsx("button",{onClick:()=>x(e.id),className:"px-3 py-1 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"+"})]}),r.jsx("button",{onClick:()=>u(e.id),className:"text-red-500 hover:text-red-600",children:"Delete"})]},e.id)):r.jsx("p",{className:"text-gray-600 text-center py-4",children:"Your cart is currently empty."})}),s.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"mt-4 text-right",children:r.jsxs("h2",{className:"text-xl font-bold",children:["Total: $",l()]})}),r.jsx("div",{className:"mt-4 text-right",children:r.jsx("button",{onClick:()=>p(),className:"text-gray-900 hover:text-gray-950 border border-black p-1 rounded hover:bg-gray-900 hover:text-white",children:"Checkout"})})]})]})})})})})]})}export{C as default};
